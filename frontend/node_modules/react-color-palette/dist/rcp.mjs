"use client"
import b,{memo as Z}from"react";function d(t,e){return Array.isArray(t)?t.includes(e):t}import I,{memo as q,useCallback as G,useMemo as y}from"react";import{useCallback as A,useLayoutEffect as z,useMemo as R,useRef as O,useState as W}from"react";function f(){let t=O(null),[e,o]=W(0),r=A(()=>o(l=>l+1),[]);z(()=>{window.addEventListener("resize",r,!1);let l=new ResizeObserver(r);return t.current&&l.observe(t.current),()=>{window.removeEventListener("resize",r,!1),l.disconnect()}},[r]);let n=R(()=>{let{width:l=1,height:a=1}=t.current?.getBoundingClientRect()??{};return{width:l,height:a}},[e]),i=A(()=>{let{left:l=1,right:a=1,top:s=1,bottom:u=1}=t.current?.getBoundingClientRect()??{};return{left:l,right:a,top:s,bottom:u}},[]);return[t,n,i]}function v(t,e,o){return t<e?e:t>o?o:t}var x=class{convert(e,o){let r=this.toHex("#000000"),n=this.hex2rgb(r),i=this.rgb2hsv(n);if(e==="hex"){let l=o;r=this.toHex(l),n=this.hex2rgb(r),r.startsWith("rgba")&&(n=this.toRgb(r),r=this.rgb2hex(n)),i=this.rgb2hsv(n)}else e==="rgb"?(n=o,r=this.rgb2hex(n),i=this.rgb2hsv(n)):e==="hsv"&&(i=o,n=this.hsv2rgb(i),r=this.rgb2hex(n));return{hex:r,rgb:n,hsv:i}}toHex(e){if(e.startsWith("#")){if(e.length===4||e.length===5)return e=e.split("").map((o,r)=>r?r<4?o+o:o==="f"?void 0:o+o:"#").join(""),e;if(e.length===7)return e;if(e.length===9)return e.endsWith("ff")?e.slice(0,7):e}else{let o=document.createElement("canvas").getContext("2d");if(!o)throw new Error("2d context not supported or canvas already initialized");return o.fillStyle=e,o.fillStyle}return"#000000"}toRgb(e){let o=e.match(/\d+(\.\d+)?/gu)??[],[r,n,i,l]=Array.from({length:4}).map((a,s)=>v(+(o[s]??(s<3?0:1)),0,s<3?255:1));return{r,g:n,b:i,a:l}}toHsv(e){let o=e.match(/\d+(\.\d+)?/gu)??[],[r,n,i,l]=Array.from({length:4}).map((a,s)=>v(+(o[s]??(s<3?0:1)),0,s?s<3?100:1:360));return{h:r,s:n,v:i,a:l}}hex2rgb(e){e=e.slice(1);let[o,r,n,i]=Array.from({length:4}).map((l,a)=>parseInt(e.slice(a*2,a*2+2),16));return i=Number.isNaN(i)?1:i/255,{r:o,g:r,b:n,a:i}}rgb2hsv({r:e,g:o,b:r,a:n}){e/=255,o/=255,r/=255;let i=Math.max(e,o,r),l=i-Math.min(e,o,r),a=l?(i===e?(o-r)/l+(o<r?6:0):i===o?2+(r-e)/l:4+(e-o)/l)*60:0,s=i?l/i*100:0,u=i*100;return{h:a,s,v:u,a:n}}hsv2rgb({h:e,s:o,v:r,a:n}){o/=100,r/=100;let i=~~(e/60),l=e/60-i,a=r*(1-o),s=r*(1-o*l),u=r*(1-o*(1-l)),c=i%6,m=[r,s,a,a,u,r][c]*255,C=[u,r,r,s,a,a][c]*255,j=[a,a,u,r,r,s][c]*255;return{r:m,g:C,b:j,a:n}}rgb2hex({r:e,g:o,b:r,a:n}){let[i,l,a,s]=[e,o,r,n].map((u,c)=>Math.round(c<3?u:u*255).toString(16).padStart(2,"0"));return["#",i,l,a,s==="ff"?void 0:s].join("")}},p=new x;import _,{memo as X,useCallback as B}from"react";var g=X(({onCoordinateChange:t,children:e})=>{let[o,{width:r,height:n},i]=f(),l=B(s=>{let{left:u,top:c}=i(),m=v(s.clientX-u,0,r),C=v(s.clientY-c,0,n);t(m,C)},[r,n,i,t]),a=B(s=>{if(s.button!==0)return;l(s);let u=m=>{l(m)},c=m=>{l(m),document.removeEventListener("pointermove",u,!1),document.removeEventListener("pointerup",c,!1)};document.addEventListener("pointermove",u,!1),document.addEventListener("pointerup",c,!1)},[l]);return _.createElement("div",{ref:o,className:"rcp-interactive",onPointerDown:a},e)});var M=q(({color:t,onChange:e})=>{let[o,{width:r}]=f(),n=y(()=>({x:t.hsv.a*r}),[t.hsv.a,r]),i=G(s=>{let u=p.convert("hsv",{...t.hsv,a:s/r});e(u)},[t.hsv,r,e]),l=y(()=>[t.rgb.r,t.rgb.g,t.rgb.b].join(" "),[t.rgb.r,t.rgb.g,t.rgb.b]),a=y(()=>[l,t.rgb.a].join(" / "),[l,t.rgb.a]);return I.createElement(g,{onCoordinateChange:i},I.createElement("div",{ref:o,style:{background:`linear-gradient(to right, rgb(${l} / 0), rgb(${l} / 1)) top left / auto auto,
                      conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) top left / 12px 12px
                      repeat`},className:"rcp-alpha"},I.createElement("div",{style:{left:n.x,background:`linear-gradient(to right, rgb(${a}), rgb(${a})) top left / auto auto,
                        conic-gradient(#666 0.25turn, #999 0.25turn 0.5turn, #666 0.5turn 0.75turn, #999 0.75turn) ${-n.x-4}px 2px / 12px 12px
                        repeat`},className:"rcp-alpha-cursor"})))});import h,{memo as U,useCallback as E,useEffect as k,useState as V}from"react";function P(t,e){return Math.round(t*10**e)/10**e}function H({r:t,g:e,b:o,a:r}){let n=[Math.round(t),Math.round(e),Math.round(o)],i=P(r,3);return i<1&&n.push(i),n.join(", ")}function N({h:t,s:e,v:o,a:r}){let n=[`${Math.round(t)}\xB0`,`${Math.round(e)}%`,`${Math.round(o)}%`],i=P(r,3);return i<1&&n.push(i),n.join(", ")}var D=U(({hideInput:t,color:e,onChange:o})=>{let[r,n]=V({hex:{value:e.hex,inputted:!1},rgb:{value:H(e.rgb),inputted:!1},hsv:{value:N(e.hsv),inputted:!1}});k(()=>{r.hex.inputted||n(s=>({...s,hex:{...s.hex,value:e.hex}}))},[r.hex.inputted,e.hex]),k(()=>{r.rgb.inputted||n(s=>({...s,rgb:{...s.rgb,value:H(e.rgb)}}))},[r.rgb.inputted,e.rgb]),k(()=>{r.hsv.inputted||n(s=>({...s,hsv:{...s.hsv,value:N(e.hsv)}}))},[r.hsv.inputted,e.hsv]);let i=E(s=>u=>{let{value:c}=u.target;n(m=>({...m,[s]:{...m[s],value:c}})),o(s==="hsv"?p.convert("hsv",p.toHsv(c)):s==="rgb"?p.convert("rgb",p.toRgb(c)):p.convert("hex",c))},[o]),l=E(s=>()=>{n(u=>({...u,[s]:{...u[s],inputted:!0}}))},[]),a=E(s=>()=>{n(u=>({...u,[s]:{...u[s],inputted:!1}}))},[]);return h.createElement("div",{className:"rcp-fields"},!d(t,"hex")&&h.createElement("div",{className:"rcp-fields-floor"},h.createElement("div",{className:"rcp-field"},h.createElement("input",{id:"hex",className:"rcp-field-input",value:r.hex.value,onChange:i("hex"),onFocus:l("hex"),onBlur:a("hex")}),h.createElement("label",{htmlFor:"hex",className:"rcp-field-label"},"HEX"))),(!d(t,"rgb")||!d(t,"hsv"))&&h.createElement("div",{className:"rcp-fields-floor"},!d(t,"rgb")&&h.createElement("div",{className:"rcp-field"},h.createElement("input",{id:"rgb",className:"rcp-field-input",value:r.rgb.value,onChange:i("rgb"),onFocus:l("rgb"),onBlur:a("rgb")}),h.createElement("label",{htmlFor:"rgb",className:"rcp-field-label"},"RGB")),!d(t,"hsv")&&h.createElement("div",{className:"rcp-field"},h.createElement("input",{id:"hsv",className:"rcp-field-input",value:r.hsv.value,onChange:i("hsv"),onFocus:l("hsv"),onBlur:a("hsv")}),h.createElement("label",{htmlFor:"hsv",className:"rcp-field-label"},"HSV"))))});import S,{memo as Y,useCallback as J,useMemo as $}from"react";var T=Y(({color:t,onChange:e})=>{let[o,{width:r}]=f(),n=$(()=>({x:t.hsv.h/360*r}),[t.hsv.h,r]),i=J(a=>{let s=p.convert("hsv",{...t.hsv,h:a/r*360});e(s)},[t.hsv,r,e]),l=$(()=>[t.hsv.h,"100%","50%"].join(" "),[t.hsv.h]);return S.createElement(g,{onCoordinateChange:i},S.createElement("div",{ref:o,className:"rcp-hue"},S.createElement("div",{style:{left:n.x,backgroundColor:`hsl(${l})`},className:"rcp-hue-cursor"})))});import w,{memo as K,useCallback as Q,useMemo as F}from"react";var L=K(({height:t,color:e,onChange:o})=>{let[r,{width:n}]=f(),i=F(()=>{let u=e.hsv.s/100*n,c=(100-e.hsv.v)/100*t;return{x:u,y:c}},[e.hsv.s,e.hsv.v,n,t]),l=Q((u,c)=>{let m=p.convert("hsv",{...e.hsv,s:u/n*100,v:100-c/t*100});o(m)},[e.hsv,n,t,o]),a=F(()=>[e.hsv.h,"100%","50%"].join(" "),[e.hsv.h]),s=F(()=>[e.rgb.r,e.rgb.g,e.rgb.b].join(" "),[e.rgb.r,e.rgb.g,e.rgb.b]);return w.createElement(g,{onCoordinateChange:l},w.createElement("div",{ref:r,style:{height:t,backgroundColor:`hsl(${a})`},className:"rcp-saturation"},w.createElement("div",{style:{left:i.x,top:i.y,backgroundColor:`rgb(${s})`},className:"rcp-saturation-cursor"})))});var ee=Z(({height:t=200,hideAlpha:e=!1,hideInput:o=!1,color:r,onChange:n})=>b.createElement("div",{className:"rcp-root rcp"},b.createElement(L,{height:t,color:r,onChange:n}),b.createElement("div",{className:"rcp-body"},b.createElement("section",{className:"rcp-section"},b.createElement(T,{color:r,onChange:n}),!e&&b.createElement(M,{color:r,onChange:n})),(!d(o,"hex")||!d(o,"rgb")||!d(o,"hsv"))&&b.createElement("section",{className:"rcp-section"},b.createElement(D,{hideInput:o,color:r,onChange:n})))));import{useEffect as re,useState as oe}from"react";function te(t){let[e,o]=oe(p.convert("hex",t));return re(()=>{o(p.convert("hex",t))},[t]),[e,o]}export{M as Alpha,ee as ColorPicker,p as ColorService,T as Hue,L as Saturation,te as useColor};
